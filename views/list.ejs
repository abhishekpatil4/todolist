<!DOCTYPE html>
<html lang="en">

<head>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
    <script>
        window.OneSignal = window.OneSignal || [];
        OneSignal.push(function () {
            OneSignal.init({
                appId: "06285199-14e2-4112-a363-e79bec25bf5d",
            });
        });
    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <title>To Do List</title>

</head>

<body>
    <div class="headTitle">
        <!-- <h1>Welcome <%= data.given_name%> <%= data.family_name%></h1> -->
    </div>
    <div class="box" id="heading">
        <h1>
            <%= kindOfDay %>
        </h1>
    </div>
    <% function getTimeLeft(date) { const futureDate=new Date(date); const currentDate=new Date(); let
        timeDiff=futureDate.getTime() - currentDate.getTime(); let daysLeft=Math.floor(timeDiff / (1000 * 60 * 60 *
        24)); let hoursLeft=Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)); let
        minutesLeft=Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60)); let secondsLeft=Math.floor((timeDiff %
        (1000 * 60)) / 1000); let timeLeft='' ; if (daysLeft> 0) {
        timeLeft += daysLeft + ' day(s), ';
        }
        if (hoursLeft > 0) {
        timeLeft += hoursLeft + ' hour(s), ';
        }
        if (minutesLeft > 0) {
        timeLeft += minutesLeft + ' minute(s) ';
        }

        return timeLeft;
        }
        %>
        <div class="box">
            <table>
                <tbody>
                    <% newListItems.forEach(function(item){ %>
                        <tr>
                            <form action="/delete" method="post">
                                <td><input type="checkbox" name="checkbox" value="<%= item._id %>"
                                        onchange="this.form.submit()"></td>
                                <td style="width: 50%;"><span>
                                        <%= item.content %>
                                    </span></td>
                                <td>
                                    <p>
                                        <%= getTimeLeft(item.date) %>
                                    </p>
                                </td>
                            </form>
                        </tr>
                        <% }) %>
                </tbody>
            </table>

            <form class="item" action="/" method="post" autocomplete="off">
                <input type="text" name="newItem" placeholder="New Item">
                <input id="datePicker" value="2023-03-10T10:45" type="datetime-local" name="newItemDate"
                    placeholder="New Item Date">
                <!-- <input id="timePicker"  value="10:50" type="time" name="newItemTime" placeholder="New Item Time"> -->
                <button id="addButton" type="submit" name="button">+</button>
            </form>
        </div>
        <div class="box-button" id="heading">
            <form action="/logout" autocomplete="off">
                <a href="/logout"><button type="submit" name="button"><b>Logout</b></button></a>
            </form>
        </div>
        <!-- weather widget start -->
        <center>
            <!-- weather widget start --><div id="m-booked-custom-widget-37088"> <div class="weather-customize" style="width:269px;"> <div class="booked-weather-custom-160 color-887ddd" style="width:269px;" id="width3"> <div class="booked-weather-custom-160-date">Weather, 18 April</div> <div class="booked-weather-custom-160-main"> <a target="_blank" href="https://www.booked.net/weather/hubli-39482" class="booked-weather-custom-160-city"> Hubli Weather </a> <div class="booked-weather-custom-160-degree booked-weather-custom-C wmd01"><span><span class="plus">+</span>35</span></div> <div class="booked-weather-custom-details"> <p><span>High: <strong><span class="plus">+</span>39<sup>°</sup></strong></span><span> Low: <strong><span class="plus">+</span>24<sup>°</sup></strong></span></p> <p>Humidity: <strong>25%</strong></p> <p>Wind: <strong>WSW - 22 KPH</strong></p> </div> </div> </div> </div> </div><script type="text/javascript"> var css_file=document.createElement("link"); var widgetUrl = location.href; css_file.setAttribute("rel","stylesheet"); css_file.setAttribute("type","text/css"); css_file.setAttribute("href",'https://s.bookcdn.com/css/weather.css?v=0.0.1'); document.getElementsByTagName("head")[0].appendChild(css_file); function setWidgetData_37088(data) { if(typeof(data) != 'undefined' && data.results.length > 0) { for(var i = 0; i < data.results.length; ++i) { var objMainBlock = document.getElementById('m-booked-custom-widget-37088'); if(objMainBlock !== null) { var copyBlock = document.getElementById('m-bookew-weather-copy-'+data.results[i].widget_type); objMainBlock.innerHTML = data.results[i].html_code; if(copyBlock !== null) objMainBlock.appendChild(copyBlock); } } } else { alert('data=undefined||data.results is empty'); } } var widgetSrc = "https://widgets.booked.net/weather/info?action=get_weather_info;ver=7;cityID=39482;type=2;scode=43161;ltid=3457;domid=w209;anc_id=19097;countday=undefined;cmetric=1;wlangID=1;color=887ddd;wwidth=269;header_color=ffffff;text_color=333333;link_color=08488D;border_form=1;footer_color=ffffff;footer_text_color=333333;transparent=0;v=0.0.1";widgetSrc += ';ref=' + widgetUrl;widgetSrc += ';rand_id=37088';var weatherBookedScript = document.createElement("script"); weatherBookedScript.setAttribute("type", "text/javascript"); weatherBookedScript.src = widgetSrc; document.body.appendChild(weatherBookedScript) </script><!-- weather widget end -->
        </center>
        <!-- weather widget end -->

</body>

</html>